# 07 | 复杂度来源：低成本、安全、规模



## 低成本

往往只有创建才能达到低成本目标，包括引入新技术，或者创造新技术



## 安全



### 功能安全

常见的 xss攻击，csrf攻击，sql注入，windows漏洞，密码破解

代码层面的漏洞

### 架构安全

主要依靠防火墙，隔离网络，通过将网络划分区域，制定出不同区域之间的访问控制策略来控制不同信任程度区域间传送的数据流

![img](https://static001.geekbang.org/resource/image/28/6b/28e72e72d8691f1c869ea0db283e156b.png)



## 规模



量变引起质变

* 功能越来越多，导致系统复杂度指数级上升

  假设系统功能两两相关，系统复杂度=功能数量 + 功能之间的连接数

  * 三个功能 = 3 + 3 = 6

  * 8个功能= 8 + 28 = 36

    ![img](https://static001.geekbang.org/resource/image/00/29/00328479c77f39c22637a3a53b535629.png)

    ![img](https://static001.geekbang.org/resource/image/3f/1c/3fcdf2386bc9158899bfc6f3625df81c.png)

* 数据越来越多，系统复杂度发生质变

  mysql 推荐单表5000w行

  * 添加索引很慢
  * 修改表结构很慢
  * 即使有索引，索引性能可能很低
  * 数据库备份耗时长
  * ......

因此，当单表数据量大时，需要考虑拆表，由此，带来了复杂度

* 拆表规则是什么，按照用户id，还是按照用户创建时间
* 拆表后查询如何处理







画架构图 4+1视图