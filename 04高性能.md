# 04 | 复杂度来源：高性能



## 任务分配



### 1.单机复杂度

* 需要增加一个任务分配器
  * 硬件网络设备F5
  * 软件网络设置 LVS
  * 负载均衡软件 nginx
* 分配器和业务系统之间的连接和交互
  * 连接建立
  * 连接检测
  * 连接中断处理
* 任务分配算法
  * 轮询
  * 权重分配
  * 按照负载分配，需要业务服务器上报状态

### 

### 2.集群复杂度



当性能要求继续提高，任务分配器会成为瓶颈，这个架构复杂度体现在![img](https://static001.geekbang.org/resource/image/67/a1/67bfe499137fcb81c639be1a859c98a1.png)

* 任务分配器从1台变成了多台在这之上需要有一个用户分配器，把不同的用户分配到不同的任务分配器上,常见方法
  * DNS轮询
  * 智能DNS
  * CDN 内容分发网络
  * GSLB全局负载均衡
* 任务分配器和业务服务器变成多对多的网状
* 机器数量大增



##  任务拆解



任务分配可以突破单台机器处理的性能。为了能继续提升性能，可以采用任务拆分

### ![img](https://static001.geekbang.org/resource/image/fd/fc/fd36126477cdd76cfbc58367784aeffc.png)



* 简单的系统更容易做到高性能

* 可以针对单个任务进行扩展
